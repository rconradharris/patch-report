{% extends '_layout.html' %}

{% block title %}
PatchReport - Stats
{% endblock title %}

{% block main_container %}
<div class="row">
    <div class="col-md-2">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Category</th>
                    <th class="rightcol">Count</th>
                    <th class="rightcol">Percent</th>
                </tr>
            </thead>
            <tbody>
                {% set total = category_counts|sum(attribute='count') %}
                {% for item in category_counts|sort(attribute='count', reverse=True) %}
                    <tr>
                        <td>
                            {% with category = item['category'] %}
                                {% if category is none %}
                                    <em>(No category)</em>
                                {% else %}
                                    {{ category }}
                                {% endif %}
                            {% endwith %}
                        </td>
                        <td class="rightcol">{{ item['count'] }}</td>
                        <td class="rightcol">{{ (item['count'] * 100 / total)|round(0) }} %</td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>Total</th>
                    <th class="rightcol">{{ total }}</th>
                    <th class="rightcol">100.0 %</th>
                </tr>
            </tfoot>
        </table>
    </div>
<div>
{% endblock main_container %}
